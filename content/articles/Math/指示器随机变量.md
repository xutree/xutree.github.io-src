Title: 指示器随机变量
Category: 其他
Date: 2018-10-28 22:54:17
Modified: 2018-10-29 18:53:28
Tags: 概率, 数学

指示器随机变量为概率和期望之间的转换提供了一个便利的方法。给定一个样本空间 $S$ 和一个事件 $A$，那么事件 $A$ 对应的**指示器随机变量** $I\{A\}$ 定义为：

$$\text{I}\{A\}=\cases{
1  & 如果 A 发生 \\
0 & 如果 A 不发生
}$$

指示器随机变量有如下性质：

$$\text{E}[X_A]=\text{Pr}\{A\}$$

就是说，指示器随机变量的期望等于它所指示事件发生的概率，指示器随机变量在分析重复随机试验时很有用。

**例题1**：连续抛硬币 $n$ 次，求正面出现次数的期望。

**解答**：设指示器随机变量 $X_i$ 对应第 $i$ 次抛硬币时正面朝上的事件。设随机变量 $X$ 表示 $n$ 次抛硬币中出现正面的总次数，则：

$$X=\sum_{i=1}^nX_i$$

对上式取期望：

$$\text{E}[X]=\text{E}\left[\sum_{i=1}^nX_i\right]=\sum_{i=1}^n\text{E}[X_i]=\sum_{i=1}^n1/2=n/2$$

**例题2**：雇佣问题。计算雇佣一个新的办公助理的期望次数。

**解答**：设指示器随机变量 $X_i$ 对应第 $i$ 个应聘者被雇用的事件。设随机变量 $X$ 表示 雇用一个新办公助理的次数，则：

$$X_i=\text{I}\{应聘者\ i\ 被雇用\}=\cases{
1  & 如果应聘者 i 被雇用 \\
0 & 如果应聘者 i 不被雇用
}$$

以及：

$$X=\sum_{i=1}^nX_i$$

容易得到：

$$\text{E}[X_i]=\frac{\text{A}_{n-1}^{n-1}}{\text{A}_n^n}=\frac{1}{n}$$

故：

$$\text{E}[X]=\text{E}\left[\sum_{i=1}^nX_i\right]=\sum_{i=1}^n\text{E}[X_i]=\sum_{i=1}^n1/i=\ln n+O(1)$$

**例题3**：$n$ 位顾客，他们每个人给餐厅核对帽子的服务生一顶帽子。服务生以随机顺序将帽子归还给顾客，求拿到自己帽子的客户的期望数。

**解答**：设指示器随机变量 $X_i$ 对应第 $i$ 个顾客拿到自己帽子的事件。设随机变量 $X$ 表示拿到自己帽子的客户的期望数，则：

$$X_i=\text{I}\{第\ i\ 个顾客拿到自己的帽子\}=\cases{
1  & 如果第 i 个顾客拿到自己的帽子 \\
0 & 如果第 i 个顾客没有拿到自己的帽子
}$$

以及：

$$X=\sum_{i=1}^nX_i$$

容易得到：

故：

$$\text{E}[X]=\text{E}\left[\sum_{i=1}^nX_i\right]=\sum_{i=1}^n\text{E}[X_i]=\sum_{i=1}^n1/n=1$$

**例题4**：设 $A[1\dots n]$ 是由 $n$ 个不同数构成的数列。如果 $i<j$ 且 $A[i]>A[j]$，则称 $(i,j)$ 对为 $A$ 的一个逆序对。假设 $A$ 的元素构成 $<1,2,\dots,n>$ 上的一个均匀分布。求其中逆序对数目的期望。

**解答**：设指示器随机变量 $X_{ij}$ 对应 $(i,j)$ 为逆序对的事件。则：

$$X_{ij}=\text{I}\{A[i]>A[j], \text{for}\ 1\leq i<j\leq n\}$$

容易得到：

$$\text{E}[X_{ij}]=\text{Pr}\{X_{ij}=1\}=1/2$$

设随机变量 $X$ 表示逆序对总数目，则：

$$X=\sum_{i=1}^{n-1}\sum_{j=i+1}^nX_{ij}$$

故：

$$\text{E}[X]=\text{E}\left[\sum_{i=1}^{n-1}\sum_{j=i+1}^nX_{ij}\right]=\sum_{i=1}^{n-1}\sum_{j=i+1}^n\text{E}[X_{ij}]=\sum_{i=1}^{n-1}\sum_{j=i+1}^n1/2\\=\frac{1}{2}\text{C}_n^2=\frac{n(n-1)}{4}$$

**例题5**：一个骰子，6面，1个面是 1， 2个面是2， 3个面是3， 问平均掷多少次能使1,2,3都至少出现一次？

**解答**：

设指示器随机变量 $X_{i}$，对应“前i次掷骰子，1，2，3没能都至少出现一次”的事件，其值为1表示“前n次掷骰子，1，2，3没能都至少出现一次”的事件，其值为0表示这个事件没有发生，即“前n次掷骰子，1，2，3各至少出现一次”。

设随机变量 $X$ 表示1，2，3刚好全部出现过需要的投掷次数。

$$X=\sum_0^{\infty}X_i$$

说明一下，等式两边都是随机变量，假设对于某个随机实例（例如，这里指一次具体的投掷序列），其对应事件是：“投了 $K$ 次恰好1，2，3都出现了”，于是等式左边显然等于 $K$；而等式右边，对于 $n < K$，由于这些项的对应定义事件发生了（即1，2，3没能出现），所以他们的实例值是1，而对于 $n\geq K$，则由于对应定义事件都没发生，实例值为0，可见这个和也是 $K$。故两侧相等。（为了达到这个相等关系，可以看出需要把 $X_0$ 包含在内的必要性）。

值得注意的是，对 $n < 3$，$X_n$ 显然恒为1。而对于 $n\geq 3$，这些随机变量不是独立的。他们的相关性是不容易求出的，唯一容易知道的是，当序列中一个项为0时，其后的项均为0。好在对于这题我们不需要担忧这个相关性。

下面求 $\text{E}[X_i]$，由于 $X_i$ 考虑的是 $i$ 次投掷三者没有全部出现，于是就是其中两者出现或仅一者出现。假设单次投掷1，2和3出现的概率分别为：$p1$，$p2$ 和 $p3$。于是 $(p1+p2)^i$ 表示 $i$ 次投掷只出现1或2的概率，这其中包括了出现全1和全2的情形，于是求 $\text{Pr}\{X_{i}=1\}$ 可由这样的项求和并剔除重复计算的单面值情形：

$$\text{Pr}\{X_{i}=1\}=\cases{
(p1+p2)^i+(p1+p3)^i+(p2+p3)^i-p1^i-p2^i-p3^i & i>0\\
0 & i=0}$$

故：

$$\text{E}[X]=\text{E}\left[\sum_{i=0}^{\infty}X_i\right]=\sum_{i=0}^{\infty}\text{E}[X_i]=\sum_{i=0}^{\infty}\text{Pr}\{X_{i}=1\}\\
=1+\frac{1-p3}{p3}+\frac{1-p2}{p2}+\frac{1-p1}{p1}-\frac{p1}{1-p1}-\frac{p2}{1-p2}-\frac{p3}{1-p3}\\
=7.3$$
